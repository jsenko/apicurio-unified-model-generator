name: Test Schema 1
version: 1
versions:
  - version: 1.0
    url: none
prefix: Test1
namespace: io.apicurio.datamodels.models.test.v1

typeAliases:

  - name: Schema
    type: ArraySchema|ObjectSchema|boolean
    unionRules:
      - unionType: ArraySchema
        ruleType: IsJsonObjectWithPropertyValue
        propertyName: type
        propertyJsonType: string
        propertyJsonValue: array
      - unionType: ObjectSchema
        ruleType: IsJsonObjectWithPropertyValue
        propertyName: type
        propertyJsonType: string
        propertyJsonValue: object

traits:

  - name: Metadata
    properties:
      - name: $comment
        type: string

entities:

  - name: Document
    root: true
    properties:
      - name: root
        type: Schema
      - name: foo
        type: string
      - name: complex1
        type: "{[string]}"
      - name: complex2
        type: Schema|[Schema]
    propertyOrder:
      - $this

  - name: ArraySchema
    traits:
      - Metadata
    properties:
      - name: type
        type: string
      - name: items
        type: Schema
    propertyOrder:
      - $Metadata
      - $this

  - name: ObjectSchema
    traits:
      - Metadata
    properties:
      - name: type
        type: string
      - name: properties
        type: "{Schema}"
    propertyOrder:
      - $Metadata
      - $this
