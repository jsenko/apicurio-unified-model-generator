name: Test Schema 1
version: 1
versions:
  - version: 1.0
    url: none
prefix: Test1
namespace: io.apicurio.datamodels.models.test2.v1

root:
  type: Schema

typeAliases:

  - name: Schema
    type: ArraySchema|ObjectSchema
    unionRules:
      - unionType: ArraySchema
        ruleType: IsJsonObjectWithPropertyValue
        propertyName: type
        propertyJsonType: string
        propertyJsonValue: array
      - unionType: ObjectSchema
        ruleType: IsJsonObjectWithPropertyValue
        propertyName: type
        propertyJsonType: string
        propertyJsonValue: object
  - name: Schema2
    type: '[ArraySchema]|{string}|boolean'
    unionRules:
      - unionType: '[ArraySchema]'
        ruleType: IsJsonType
        propertyJsonType: array
      - unionType: '{string}'
        ruleType: IsJsonType
        propertyJsonType: object
      - unionType: boolean
        ruleType: IsJsonType
        propertyJsonType: boolean

traits:

  - name: Referenceable
    properties:
      - name: '$ref'
        type: string

  - name: Extensible
    properties:
      - name: '/^x-.+$/'
        type: any
        collection: extensions

entities:

  - name: ArraySchema
    traits:
      - Referenceable
      - Extensible
    properties:
      - name: type
        type: string
      - name: schemaStar
        type: SchemaStar
      - name: schema2
        type: Schema2
    propertyOrder:
      - $this
      - $Referenceable
      - $Extensible

  - name: ObjectSchema
    traits:
      - Referenceable
      - Extensible
    properties:
      - name: type
        type: string
      - name: fooSchema
        type: Schema
      - name: fooSchemaList
        type: '[Schema]'
      - name: fooSchemaMap
        type: '{Schema}'
    propertyOrder:
      - $this
      - $Referenceable
      - $Extensible

  - name: SchemaStar
    traits:
      - Referenceable
      - Extensible
    properties:
      - name: '*'
        type: Schema
    propertyOrder:
      - $this
      - $Referenceable
      - $Extensible
